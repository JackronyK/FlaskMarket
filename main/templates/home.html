{% extends 'base.html'%}

{% block title%} Welcome | FlaskMarket{% endblock %}

{% block content%}
    <!-- Hero -->
    <div class="hero">
        <div class="hero-content text-center px-2">
            <h3 class="display-2 fw-light">Welcome to FlaskMarket</h3>
            <p class="lead text-white-50 mb-4">Discover amazing products, track prices and enjoy a seamless shopping experince.</p>
            <a href="{{ url_for('users.view_market') }}" class="btn btn-lg btn-outline-success shadow me-2">
                <i class="fas fa-shopping-cart me-1"></i>Browse Market
            </a>
            <a href="{{ url_for('users.register_user') }}" class="btn btn-lg btn-outline-light shadow">
                <i class="fas fa-user-plus me-1"></i>Sign Up
            </a>
        </div>
    </div>
    <!-- SVG Wave Divider -->
    <div style="overflow: hidden; line-height: 0;">
        <svg viewBox="0 0 1200 100" preserveAspectRatio="none" style="display: block; width: 100%; height:50px">
            <path d="M0,0 C600,100 600,100 1200,0 L1200,100 L0,100 Z" fill="#121848"/>
        </svg>
    </div>

    <!-- On Sale Section -->
    {% if discounted_items %}
    <div class="container py-5">
        <h3 class="text-center gradient-title mb-4">
            <i class="fas fa-tags" me-2></i>Hot Deals - On Sale Now!
        </h3>
        <div class="row g-4">
            {% for item in discounted_items %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100 shadow-sm">
                    {% if item.image_url %}
                    <img src="{{ url_for('admins.static', filename=item.image_url) }}"
                        class="card-img-top object-fit-cover" alt="{{ item.name }}"
                        style="height: 160px;">
                    {% else %}
                    <div class="bg-light d-flex align-items-center justify-content-center" style="height: 160px;">
                        <i class="fas fa-box-open fa-2x text-muted"></i>
                    </div>
                    {% endif %}
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{item.name}}</h5>
                        <p class="mb-1">
                            <span class="text-muted text-decoration-line-through">
                                Ksh {{ '%.2f'|format(item.price) }}
                            </span>
                            <span class="fw-bold text-danger">
                                Ksh {{ '%.2f'|format(item.price * (1 - item.discount/100)) }}
                            </span>
                        </p>
                        <a href="{{ url_for('orders.add_item', item_id=item.item_id) }}" class="btn btn-danger btn-sm mt-auto">
                            <i class="fas fa-cart-plus me-1"></i>Add to Cart
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
{% endblock%}
